<ngx-institute-header></ngx-institute-header>

<nb-card>
  <nb-card-header>
    <div class="row">
      <div class="col-sm-6">
        <p class="font-weight-bolder">Active Students</p>
      </div>

      <div class="col-sm-3">
        <label>Search Student</label>
        <input
          type="text"
          nbInput
          [(ngModel)]="searchStudentFilter"
          (input)="filterActiveStudents()"
          fullWidth
          placeholder="Search Student By Name"
        />
      </div>

      <div class="col-sm-3">
        <div class="form-group">
          <label>Select Course</label>
          <nb-select
            placeholder="Select Course"
            status="basic"
            fullWidth
            (selectedChange)="onSelectCourse($event)"
            selected="all"
          >
            <nb-option value="all">All</nb-option>
            <nb-option *ngFor="let i of courses" [value]="i._id">{{ i.name }}</nb-option>
          </nb-select>
        </div>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body>
    <table *ngIf="students.length > 0 && !hideHeaders; else noStudents">
      <thead>
        <tr>
          <th>Name</th>
          <th>Roll No.</th>
          <th>Contact</th>
          <!-- <th>Course Name</th> -->
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let student of students; let i = index" [hidden]="student.filterOut">
          <td>{{ student.basicDetails.name }}</td>
          <td>{{ student.instituteDetails.rollNumber }}</td>
          <td>{{ student.basicDetails.studentContact }}</td>
          <!-- <td>{{ student.courseDetails.course }}</td> -->
          <td>
            <button
              class="mr-2 mb-2"
              nbButton
              status="primary"
              (click)="view(student.eduAtlasId, student.instituteDetails.courseId)"
            >
              View
            </button>
            <button
              type="button"
              class="btn btn-yellow mr-2 mb-2"
              (click)="edit(student.eduAtlasId, student.instituteDetails.courseId)"
            >
              Edit
            </button>
            <button
              class="mr-2 mb-2"
              nbButton
              status="danger"
              (click)="
                delete(
                  student.eduAtlasId,
                  student.instituteDetails._id,
                  student.instituteDetails.courseId,
                  student._id
                )
              "
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <ng-template #noStudents>
      <p class="text-center pt-5">No Students Found</p>
    </ng-template>
  </nb-card-body>
</nb-card>
